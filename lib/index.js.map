{"version":3,"file":"index.js","sources":["webpack://VdtnetTable/index.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"VdtnetTable\",[],t):\"object\"==typeof exports?exports.VdtnetTable=t():e.VdtnetTable=t()}(self,(function(){return function(){\"use strict\";var e={281:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=1,r={name:\"VdtnetTable\",props:{id:{type:String,default:null},containerClassName:{type:String,default:\"table-responsive d-print-inline\"},columnSearchClassName:{type:String,default:\"form-control form-control-sm\"},tfootClassName:{type:String},theadClassName:{type:String},className:{type:String,default:\"table table-striped table-bordered nowrap w-100\"},opts:{type:Object},fields:{type:Object},jquery:{type:Object},vue:{type:Object},selectCheckbox:{type:Number},dataLoader:{type:Function},hideFooter:{type:Boolean},hideTfoot:{type:Boolean,default:!0},columnSearch:{type:Boolean,default:!1},details:{type:Object}},data:function(){return{tableId:null,options:{dom:\"tr<'row vdtnet-footer'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'pl>>\",columns:[],language:{infoFiltered:\"\"},lengthMenu:[[15,100,500,1e3,-1],[15,100,500,1e3,\"All\"]],pageLength:15,buttons:[]},dataTable:null,vdtnet:this}},computed:{jq:function(){return this.jquery||window.jQuery},myVue:function(){return this.vue||window.Vue},classes:function(){var e=\"\".concat(this.containerClassName,\" vdtnet-container\");return this.hideFooter&&(e+=\" hide-footer\"),e}},created:function(){var e=this,t=e.jq,a=0,r=0;if(e.tableId=e.id||\"vdtnetable\".concat(n++),e.opts&&(e.options=t.extend({},e.options,e.opts)),e.options.order=e.options.order||[[a,\"asc\"]],e.fields){var o=e.fields,s=e.options.columns,l=e.options.order;for(var i in o){var c=o[i];c.name=c.name||i,c.isLocal&&(c.searchable=!1,c.sortable=!1);var d={label:c.label||c.name,data:c.data||c.name,width:c.width,name:c.name,className:c.className,index:c.index||r+1};c.hasOwnProperty(\"defaultContent\")&&(d.defaultContent=c.defaultContent),c.hasOwnProperty(\"sortable\")&&(d.orderable=c.sortable),c.hasOwnProperty(\"visible\")&&(d.visible=c.visible),c.hasOwnProperty(\"searchable\")&&(d.searchable=c.searchable),c.hasOwnProperty(\"editField\")&&(d.editField=c.editField),c.hasOwnProperty(\"classHeaderName\")&&(d.classHeaderName=c.classHeaderName),c.hasOwnProperty(\"classFooterName\")&&(d.classFooterName=c.classFooterName),c.template&&(d.template=c.template),c.render&&(d.render=c.render),s.push(d),c.defaultOrder&&l.push([r,c.defaultOrder]),r++}}if(e.selectCheckbox){e.selectCheckbox=e.selectCheckbox||1;var u={orderable:!1,searchable:!1,name:\"_select_checkbox\",className:\"select-checkbox d-print-none\",data:null,defaultContent:\"\",index:e.selectCheckbox-1};e.options.columns.splice(e.selectCheckbox-1,0,u),e.options.select=e.options.select||{style:\"os\",selector:\"td.select-checkbox\"},1===e.selectCheckbox&&a++}if(e.details){e.details.index=e.details.index||1;var p={orderable:!1,searchable:!1,name:\"_details_control\",className:\"details-control d-print-none\",data:null,defaultContent:e.details.icons||'<span class=\"details-plus\" title=\"Show details\">+</span><span class=\"details-minus\" title=\"Hide details\">-</span>',index:e.details.index-1};e.options.columns.splice(e.details.index-1,0,p),1===e.details.index&&a++}a>0&&(e.options.order?e.options.order.forEach((function(e){e[0]+=a})):e.options.order=[[a,\"asc\"]])},mounted:function(){var e=this,t=e.jq,a=t(e.$refs.table),n=e.options.columns;for(var r in n){var o=n[r];(o.template||e.$scopedSlots[o.name])&&(o.render=e.compileTemplate(o,e.$scopedSlots[o.name])),o.render&&(o.render.templated||function(){var t=o.render;o.render=function(){return t.apply(e,Array.prototype.slice.call(arguments))}}()),o.template&&delete o.template}if(e.dataLoader&&(delete e.options.ajax,e.options.serverSide=!1),!e.hideFooter&&e.columnSearch&&(e.options.initComplete=function(){var e=this.api(),a=e.state.loaded();e.columns().every((function(){var e=this,n=this.index();if(a){var r=a.columns[n].search;r.search&&t(\"input\",this.footer()).val(r.search)}t(\"input\",this.footer()).on(\"keyup change clear search\",(function(){e.search()!==this.value&&e.search(this.value).draw()}))}))}),e.$emit(\"table-creating\",e,a),e.dataTable=a.DataTable(e.options),e.selectCheckbox&&(a.on(\"click\",\"th input.select-all-checkbox\",(function(a){t(a.target).is(\":checked\")?e.dataTable.rows().select():e.dataTable.rows().deselect()})),e.dataTable.on(\"select deselect\",(function(n,r,o,s){var l=a.find(\"th input.select-all-checkbox\");e.dataTable.rows({selected:!0}).count()!==e.dataTable.rows().count()?(t(\"th.select-checkbox\").removeClass(\"selected\"),l.attr(\"checked\",!1)):(t(\"th.select-checkbox\").addClass(\"selected\"),l.attr(\"checked\",!0)),e.$emit(\"row-\"+n.type,{dataTable:e.dataTable,e:n,dt:r,type:o,indexes:s})}))),a.on(\"click\",\"[data-action]\",(function(a){a.preventDefault(),a.stopPropagation();var n=t(a.target),r=n.attr(\"data-action\");if(r){var o=n;if(\"TR\"!==n.prop(\"tagName\")&&(o=n.closest(\"tr\")),o){o.hasClass(\"master-details\")&&(o=o.prev());var s=e.dataTable.row(o),l=s.data();e.$emit(r,l,s,o,n)}else e.$emit(r,null,null,null,n)}})),e.details){var s=e.details.render;e.details.template||e.$scopedSlots._details?s=e.compileTemplate(e.details,e.$scopedSlots._details):s&&(s=function(){return e.details.render.apply(e,Array.prototype.slice.call(arguments))}),a.on(\"click\",\"td.details-control\",(function(a){a.preventDefault(),a.stopPropagation();var n=t(a.target).closest(\"tr\");n.hasClass(\"master-details\")&&(n=n.prev());var r=e.dataTable.row(n);if(r.child.isShown())r.child.hide(),n.removeClass(\"master\");else{var o=r.data();r.child(s(o,\"child\",r,n)).show(),n.addClass(\"master\").next().addClass(\"master-details\")}}))}e.$emit(\"table-created\",e),e.dataLoader&&e.reload()},beforeDestroy:function(){var e=this;e.dataTable&&e.dataTable.destroy(!0),e.dataTable=null},methods:{compileTemplate:function(e,t){var a=this,n=a.jq,r=a.myVue,o=r.compile(\"<div>\".concat(e.template||\"\",\"</div>\")),s=function(s,l,i,c){var d=o.render;t&&(d=function(n){return n(\"div\",[t({data:s,type:l,row:i,meta:c,vdtnet:a,def:e,comp:a.$parent})])});var u=new r({data:{data:s,type:l,row:i,meta:c,vdtnet:a,def:e,comp:a.$parent},render:d,staticRenderFns:o.staticRenderFns}).$mount();return n(u.$el).html()};return s.templated=!0,s},setTableData:function(e){var t=this;return e.constructor===Array&&(t.dataTable.clear().rows.add(e),t.dataTable.draw(!1),t.dataTable.columns.adjust()),t},reload:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return t.dataLoader?t.dataLoader((function(e){e&&!e.data&&(e={data:e}),t.setTableData(e.data),t.$emit(\"reloaded\",e,t)})):t.dataTable.ajax.reload((function(e){t.$emit(\"reloaded\",e,t)}),e),t},search:function(e){return this.dataTable.search(e).draw(),this},setPageLength:function(e){return this.dataTable.page.len(e),this.reload()},getServerParams:function(){return this.dataLoader?{}:this.dataTable.ajax.params()}}},o=a(379),s=a.n(o),l=a(723),i={insert:\"head\",singleton:!1};s()(l.Z,i),l.Z.locals;var c=function(e,t,a,n,r,o,s,l){var i,c=\"function\"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId=\"data-v-\"+o),s?(i=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=i):r&&(i=l?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),i)if(c.functional){c._injectStyles=i;var d=c.render;c.render=function(e,t){return i.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,i):[i]}return{exports:e,options:c}}(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"div\",{class:e.classes},[e._m(0)])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"table\",{ref:\"table\",class:e.className,attrs:{id:e.tableId,cellpadding:\"0\"}},[a(\"thead\",{class:e.theadClassName},[a(\"tr\",e._l(e.options.columns,(function(t,n){return a(\"th\",{key:\"head_\"+n,class:t.classHeaderName},[e._t(\"HEAD_\"+t.name,[\"_select_checkbox\"===t.name?a(\"input\",{staticClass:\"select-all-checkbox d-print-none\",attrs:{type:\"checkbox\"}}):a(\"div\",{domProps:{innerHTML:e._s(t.label)}})],{field:t,i:n})],2)})),0)]),e._v(\" \"),e.hideTfoot?e._e():a(\"tfoot\",{class:e.tfootClassName},[a(\"tr\",e._l(e.options.columns,(function(t,n){return a(\"th\",{key:\"foot_\"+n,class:t.classFooterName},[e._t(\"FOOT_\"+t.name,[e.columnSearch&&(t.searchable||void 0===t.searchable)?a(\"input\",{class:e.columnSearchClassName,attrs:{placeholder:t.label,type:\"search\"}}):e.columnSearch?e._e():a(\"div\",{domProps:{innerHTML:e._s(t.label)}})],{field:t,i:n})],2)})),0)])])}],!1,null,null,null).exports},723:function(e,t,a){var n=a(645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,\".select-all-checkbox,.select-checkbox{cursor:pointer}.vdtnet-footer .dataTables_length{padding-top:6px;padding-right:10px}.vdtnet-footer .dataTables_length,.vdtnet-footer .dataTables_paginate{float:right}.hide-footer .vdtnet-footer{display:none}.details-minus,.master .details-plus{cursor:pointer;display:none}.master .details-minus{cursor:pointer;display:inline}.details-control{cursor:pointer;font-weight:700}\",\"\"]),t.Z=r},645:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(a,\"}\"):a})).join(\"\")},t.i=function(e,a,n){\"string\"==typeof e&&(e=[[null,e,\"\"]]);var r={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var l=0;l<e.length;l++){var i=[].concat(e[l]);n&&r[i[0]]||(a&&(i[2]?i[2]=\"\".concat(a,\" and \").concat(i[2]):i[2]=a),t.push(i))}},t}},379:function(e,t,a){var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function l(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function i(e,t){for(var a={},n=[],r=0;r<e.length;r++){var o=e[r],i=t.base?o[0]+t.base:o[0],c=a[i]||0,d=\"\".concat(i,\" \").concat(c);a[i]=c+1;var u=l(d),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(s[u].references++,s[u].updater(p)):s.push({identifier:d,updater:b(p,t),references:1}),n.push(d)}return n}function c(e){var t=document.createElement(\"style\"),n=e.attributes||{};if(void 0===n.nonce){var r=a.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),\"function\"==typeof e.insert)e.insert(t);else{var s=o(e.insert||\"head\");if(!s)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");s.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join(\"\\n\")});function p(e,t,a,n){var r=a?\"\":n.media?\"@media \".concat(n.media,\" {\").concat(n.css,\"}\"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function f(e,t,a){var n=a.css,r=a.media,o=a.sourceMap;if(r?e.setAttribute(\"media\",r):e.removeAttribute(\"media\"),o&&\"undefined\"!=typeof btoa&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))),\" */\")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var h=null,m=0;function b(e,t){var a,n,r;if(t.singleton){var o=m++;a=h||(h=c(t)),n=p.bind(null,a,o,!1),r=p.bind(null,a,o,!0)}else a=c(t),n=f.bind(null,a,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=r());var a=i(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var r=l(a[n]);s[r].references--}for(var o=i(e,t),c=0;c<a.length;c++){var d=l(a[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}a=o}}}}},t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,a),r.exports}return a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a(281)}()}));"],"mappings":"AAAA","sourceRoot":""}