{"version":3,"file":"index.js","sources":["webpack://VdtnetTable/index.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"VdtnetTable\",[],t):\"object\"==typeof exports?exports.VdtnetTable=t():e.VdtnetTable=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/\",n(n.s=0)}({0:function(e,t,n){e.exports=n(\"tjUo\")},\"63nt\":function(e,t,n){\"use strict\";var r=n(\"tAsi\");n.n(r).a},\"9tPo\":function(e,t){e.exports=function(e){var t=\"undefined\"!=typeof window&&window.location;if(!t)throw new Error(\"fixUrls requires window.location\");if(!e||\"string\"!=typeof e)return e;var n=t.protocol+\"//\"+t.host,r=n+t.pathname.replace(/\\/[^\\/]*$/,\"/\");return e.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,(function(e,t){var a,o=t.trim().replace(/^\"(.*)\"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(o)?e:(a=0===o.indexOf(\"//\")?o:0===o.indexOf(\"/\")?n+o:r+o.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(a)+\")\")}))}},JPst:function(e,t,n){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||\"\",r=e[3];if(!r)return n;if(t&&\"function\"==typeof btoa){var a=(i=r,\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+\" */\"),o=r.sources.map((function(e){return\"/*# sourceURL=\"+r.sourceRoot+e+\" */\"}));return[n].concat(o).concat([a]).join(\"\\n\")}var i;return[n].join(\"\\n\")}(t,e);return t[2]?\"@media \"+t[2]+\"{\"+n+\"}\":n})).join(\"\")},t.i=function(e,n){\"string\"==typeof e&&(e=[[null,e,\"\"]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(a=0;a<e.length;a++){var i=e[a];null!=i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]=\"(\"+i[2]+\") and (\"+n+\")\"),t.push(i))}},t}},Txmi:function(e,t,n){(e.exports=n(\"JPst\")(!1)).push([e.i,\"\\n.select-checkbox, .select-all-checkbox {\\n  cursor: pointer;\\n}\\n.vdtnet-footer .dataTables_length {\\n  padding-top: 6px;\\n  padding-right: 10px;\\n}\\n.vdtnet-footer .dataTables_length, .vdtnet-footer .dataTables_paginate {\\n  float: right;\\n}\\n.hide-footer .vdtnet-footer {\\n  display: none;\\n}\\n.master .details-plus\\n{\\n  cursor: pointer;\\n  display: none;\\n}\\n.details-minus\\n{\\n  cursor: pointer;\\n  display: none;\\n}\\n.master .details-minus\\n{\\n  cursor: pointer;\\n  display: inline;\\n}\\n.details-control {\\n  cursor: pointer;\\n  font-weight: 700;\\n}\\n\",\"\"])},\"aET+\":function(e,t,n){var r,a,o={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=r.apply(this,arguments)),a}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if(\"function\"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),c=null,d=0,u=[],f=n(\"9tPo\");function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=o[r.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](r.parts[i]);for(;i<r.parts.length;i++)a.parts.push(x(r.parts[i],t))}else{var s=[];for(i=0;i<r.parts.length;i++)s.push(x(r.parts[i],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],r={},a=0;a<e.length;a++){var o=e[a],i=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}function b(e,t){var n=l(e.insertInto);if(!n)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var r=u[u.length-1];if(\"top\"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if(\"bottom\"===e.insertAt)n.appendChild(t);else{if(\"object\"!=typeof e.insertAt||!e.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var a=l(e.insertAt.before,n);n.insertBefore(t,a)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement(\"style\");if(void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return y(t,e.attrs),b(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function x(e,t){var n,r,a,o;if(t.transform&&e.css){if(!(o=\"function\"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var i=d++;n=c||(c=v(t)),r=T.bind(null,n,i,!1),a=T.bind(null,n,i,!0)}else e.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(n=function(e){var t=document.createElement(\"link\");return void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),e.attrs.rel=\"stylesheet\",y(t,e.attrs),b(e,t),t}(t),r=_.bind(null,n,t),a=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=j.bind(null,n),a=function(){m(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(t=t||{}).attrs=\"object\"==typeof t.attrs?t.attrs:{},t.singleton||\"boolean\"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto=\"head\"),t.insertAt||(t.insertAt=\"bottom\");var n=h(e,t);return p(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var i=n[a];(s=o[i.id]).refs--,r.push(s)}e&&p(h(e,t),t);for(a=0;a<r.length;a++){var s;if(0===(s=r[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var g,w=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join(\"\\n\")});function T(e,t,n,r){var a=n?\"\":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function j(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute(\"media\",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function _(e,t,n){var r=n.css,a=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||o)&&(r=f(r)),a&&(r+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+\" */\");var i=new Blob([r],{type:\"text/css\"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}},tAsi:function(e,t,n){var r=n(\"Txmi\");\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(\"aET+\")(r,a);r.locals&&(e.exports=r.locals)},tjUo:function(e,t,n){\"use strict\";n.r(t);var r=1,a={name:\"VdtnetTable\",props:{id:{type:String,default:null},containerClassName:{type:String,default:\"table-responsive d-print-inline\"},className:{type:String,default:\"table table-striped table-bordered nowrap w-100\"},opts:{type:Object},fields:{type:Object},jquery:{type:Object},vue:{type:Object},selectCheckbox:{type:Number},dataLoader:{type:Function},hideFooter:{type:Boolean},details:{type:Object}},data:function(){return{tableId:null,options:{dom:\"tr<'row vdtnet-footer'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'pl>>\",columns:[],language:{infoFiltered:\"\"},lengthMenu:[[15,100,500,1e3,-1],[15,100,500,1e3,\"All\"]],pageLength:15,buttons:[]},dataTable:null,vdtnet:this}},computed:{jq:function(){return this.jquery||window.jQuery},myVue:function(){return this.vue||window.Vue},classes:function(){var e=\"\".concat(this.containerClassName,\" vdtnet-container\");return this.hideFooter&&(e+=\" hide-footer\"),e}},created:function(){var e=this.jq;this.tableId=this.id||\"vdtnetable\".concat(r++),this.opts&&(this.options=e.extend({},this.options,this.opts))},mounted:function(){var e=this,t=e.jq,n=t(e.$refs.table),r=[],a=0,o=0;if(e.fields){var i=e.fields,s=e.options.columns;for(var l in i){var c=i[l];c.name=c.name||l,c.isLocal&&(c.searchable=!1,c.sortable=!1);var d={title:c.label||c.name,data:c.data||c.name,width:c.width,name:c.name,className:c.className,index:c.index||o+1};c.width&&(d.width=c.width),c.hasOwnProperty(\"defaultContent\")&&(d.defaultContent=c.defaultContent),c.hasOwnProperty(\"sortable\")&&(d.orderable=c.sortable),c.hasOwnProperty(\"visible\")&&(d.visible=c.visible),c.hasOwnProperty(\"searchable\")&&(d.searchable=c.searchable),c.hasOwnProperty(\"editField\")&&(d.editField=c.editField),(c.template||e.$scopedSlots[c.name])&&(c.render=e.compileTemplate(c,e.$scopedSlots[c.name])),c.render&&(c.render.templated||function(){var t=c.render;c.render=function(){return t.apply(e,Array.prototype.slice.call(arguments))}}(),d.render=c.render),s.push(d),c.defaultOrder&&r.push([o,c.defaultOrder]),o++}s=s.sort((function(e,t){return e.index-t.index}))}if(e.options.order=e.options.order||r,e.selectCheckbox){e.selectCheckbox=e.selectCheckbox||1;var u={orderable:!1,searchable:!1,name:\"_select_checkbox\",className:\"select-checkbox d-print-none\",data:null,defaultContent:\"\",title:'<input type=\"checkbox\" class=\"select-all-checkbox d-print-none\">',index:e.selectCheckbox-1};e.options.columns.splice(e.selectCheckbox-1,0,u),e.options.select=e.options.select||{style:\"os\",selector:\"td.select-checkbox\"},1===e.selectCheckbox&&a++}if(e.details){e.details.index=e.details.index||1;var f={orderable:!1,searchable:!1,name:\"_details_control\",className:\"details-control d-print-none\",data:null,defaultContent:e.details.icons||'<span class=\"details-plus\" title=\"Show details\">+</span><span class=\"details-minus\" title=\"Hide details\">-</span>',index:e.details.index-1};e.options.columns.splice(e.details.index-1,0,f),1===e.details.index&&a++}if(a>0&&(e.options.order?e.options.order.forEach((function(e){e[0]+=a})):e.options.order=[[a,\"asc\"]]),e.dataLoader&&(delete e.options.ajax,e.options.serverSide=!1),e.$emit(\"table-creating\",e,n),e.dataTable=n.DataTable(e.options),e.selectCheckbox&&(n.on(\"click\",\"th input.select-all-checkbox\",(function(n){t(n.target).is(\":checked\")?e.dataTable.rows().select():e.dataTable.rows().deselect()})),e.dataTable.on(\"select deselect\",(function(r,a,o,i){var s=n.find(\"th input.select-all-checkbox\");e.dataTable.rows({selected:!0}).count()!==e.dataTable.rows().count()?(t(\"th.select-checkbox\").removeClass(\"selected\"),s.attr(\"checked\",!1)):(t(\"th.select-checkbox\").addClass(\"selected\"),s.attr(\"checked\",!0)),e.$emit(\"row-\"+r.type,{dataTable:e.dataTable,e:r,dt:a,type:o,indexes:i})}))),n.on(\"click\",\"[data-action]\",(function(n){n.preventDefault(),n.stopPropagation();for(var r=t(n.target),a=r.attr(\"data-action\");!a;){if(r.hasClass(\"vdtnet-container\")||\"table\"===r.prop(\"tagName\"))return;a=(r=r.parent()).attr(\"data-action\")}if(a){var o=r.closest(\"tr\");if(o){\"row\"!==o.attr(\"role\")&&(o=o.prev());var i=e.dataTable.row(o),s=i.data();e.$emit(a,s,i,o,r)}else e.$emit(a,null,null,null,r)}})),e.details){var p=e.details.render;e.details.template||e.$scopedSlots._details?p=e.compileTemplate(e.details,e.$scopedSlots._details):p&&(p=function(){return e.details.render.apply(e,Array.prototype.slice.call(arguments))}),n.on(\"click\",\"td.details-control\",(function(n){n.preventDefault(),n.stopPropagation();var r=t(n.target).closest(\"tr\");\"row\"!==r.attr(\"role\")&&(r=r.prev());var a=e.dataTable.row(r);if(a.child.isShown())a.child.hide(),r.removeClass(\"master\");else{var o=a.data();a.child(p(o,\"child\",a,r)).show(),r.addClass(\"master\")}}))}e.$emit(\"table-created\",e),e.dataLoader&&e.reload()},beforeDestroy:function(){this.dataTable&&this.dataTable.destroy(!0),this.dataTable=null},methods:{compileTemplate:function(e,t){var n=this,r=n.jq,a=n.myVue,o=a.compile(\"<div>\".concat(e.template||\"\",\"</div>\")),i=function(i,s,l,c){var d=o.render;t&&(d=function(r){return r(\"div\",[t({data:i,type:s,row:l,meta:c,vdtnet:n,def:e,comp:n.$parent})])});var u=new a({data:{data:i,type:s,row:l,meta:c,vdtnet:n,def:e,comp:n.$parent},render:d,staticRenderFns:o.staticRenderFns}).$mount();return r(u.$el).html()};return i.templated=!0,i},setTableData:function(e){return e.constructor===Array&&(this.dataTable.clear().rows.add(e),this.dataTable.draw(!1),this.dataTable.columns.adjust()),this},reload:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return t.dataLoader?t.dataLoader((function(e){e&&!e.data&&(e={data:e}),t.setTableData(e.data),t.$emit(\"reloaded\",e,t)})):t.dataTable.ajax.reload((function(e){t.$emit(\"reloaded\",e,t)}),e),t},search:function(e){return this.dataTable.search(e).draw(),this},setPageLength:function(e){return this.dataTable.page.len(e),this.reload()},getServerParams:function(){return this.dataLoader?{}:this.dataTable.ajax.params()}}};n(\"63nt\");var o=function(e,t,n,r,a,o,i,s){var l,c=\"function\"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId=\"data-v-\"+o),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=l):a&&(l=s?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}(a,(function(){var e=this.$createElement;return(this._self._c||e)(\"div\",{class:this.classes},[this._m(0)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"table\",{ref:\"table\",class:e.className,attrs:{id:e.tableId,cellpadding:\"0\"}},[n(\"thead\",[n(\"tr\",e._l(e.options.columns,(function(t,r){return n(\"th\",{key:r,class:t.className},[e._t(\"HEAD_\"+t.name,[n(\"div\",{domProps:{innerHTML:e._s(t.title)}})],{field:t,i:r})],2)})),0)])])}],!1,null,null,null).exports;t.default=o}})}));"],"mappings":"AAAA","sourceRoot":""}